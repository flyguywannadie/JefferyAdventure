[gd_scene load_steps=16 format=4 uid="uid://cbgqoxvrxq4k3"]

[ext_resource type="Script" path="res://Scripts/Room.gd" id="1_pt4yu"]
[ext_resource type="TileSet" uid="uid://khxjqjugnsov" path="res://Tilemaps/TestTileMap.tres" id="2_v0erk"]
[ext_resource type="TileSet" uid="uid://d0skvtijb1y7" path="res://Tilemaps/TestTileMap_Trigger.tres" id="3_lmkqo"]
[ext_resource type="Shader" path="res://FadingShader.gdshader" id="4_86vej"]
[ext_resource type="Script" path="res://Scripts/HidingWalls.gd" id="5_nsfy7"]
[ext_resource type="PackedScene" uid="uid://v42kviymhbdq" path="res://Scenes/Prefabs/RoomSetup/doorway.tscn" id="6_2tb61"]
[ext_resource type="PackedScene" uid="uid://bh523bxi5rvi" path="res://Scenes/Prefabs/RoomSetup/camera_track.tscn" id="7_j7nv0"]
[ext_resource type="PackedScene" uid="uid://bu1akkp0a5jd7" path="res://Scenes/Prefabs/RoomSetup/Checkpoint.tscn" id="8_gmsui"]
[ext_resource type="TileSet" uid="uid://dvjpdafy12snk" path="res://Tilemaps/TestTileMap_NoShadow.tres" id="9_qer7y"]
[ext_resource type="Texture2D" uid="uid://k8hxbw6muhyp" path="res://Textures/Backgrounds/ScalableBackgroundColor.png" id="10_nktyo"]
[ext_resource type="PackedScene" uid="uid://dc2oo5d4e4gee" path="res://Scenes/Prefabs/walker.tscn" id="11_5vdsv"]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_005up"]
resource_local_to_scene = true
shader = ExtResource("4_86vej")
shader_parameter/fade = 1.0

[sub_resource type="RectangleShape2D" id="RectangleShape2D_nwqok"]
size = Vector2(448, 128)

[sub_resource type="ShaderMaterial" id="ShaderMaterial_p52fq"]
resource_local_to_scene = true
shader = ExtResource("4_86vej")
shader_parameter/fade = 1.0

[sub_resource type="RectangleShape2D" id="RectangleShape2D_p48pr"]
size = Vector2(448, 128)

[node name="StorageRoom" type="Node2D" node_paths=PackedStringArray("camTracks", "entrances")]
script = ExtResource("1_pt4yu")
camTracks = [NodePath("Storage Room")]
entrances = [NodePath("ToFactoryFloor"), NodePath("VentToFactory"), NodePath("ToBossRoom")]

[node name="MainMap" type="TileMapLayer" parent="."]
z_index = 15
tile_map_data = PackedByteArray("AAD2/wAAAQABAAIAAAD3/wAAAQABAAIAAAD3////AQACAAEAAAD2////AQACAAEAAAD2//7/AQACAAEAAAD3//7/AQACAAEAAAD4//7/AQACAAEAAAD4////AQAFAAMAAAD4/wAAAQAGAAMAAAD3/wQAAQADAAAAAAD4/wQAAQADAAAAAAD5/wQAAQADAAAAAAD4/wUAAQACAAEAAAD3/wUAAQACAAEAAAD2/wUAAQACAAEAAAD2/wQAAQADAAAAAAD5/wUAAQACAAEAAAD6/wUAAQACAAEAAAD6/wQAAQADAAAAAAD7/wUAAQACAAEAAAD7/wQAAQADAAAAAAD8/wQAAQADAAAAAAD8/wUAAQACAAEAAAD9/wQAAQADAAAAAAD9/wUAAQACAAEAAAD+/wUAAQACAAEAAAD+/wQAAQADAAAAAAD//wUAAQACAAEAAAD//wQAAQADAAAAAAD3/wYAAQACAAEAAAD3/wcAAQACAAEAAAD3/wgAAQACAAEAAAD3/wkAAQACAAEAAAD4/wYAAQACAAEAAAD4/wcAAQACAAEAAAD4/wgAAQACAAEAAAD4/wkAAQACAAEAAAD5//7/AQADAAIAAAD5////AQAGAAMAAAD5/wYAAQACAAEAAAD5/wcAAQACAAEAAAD5/wgAAQACAAEAAAD5/wkAAQACAAEAAAD6/wYAAQACAAEAAAD6/wcAAQACAAEAAAD6/wgAAQACAAEAAAD6/wkAAQACAAEAAAD2/wYAAQACAAEAAAD2/wcAAQACAAEAAAD2/wgAAQACAAEAAAD2/wkAAQACAAEAAAAAAAQAAQADAAAAAAAAAAUAAQACAAEAAAD7/wYAAQACAAEAAAD8/wYAAQACAAEAAAD9/wYAAQACAAEAAAD+/wYAAQACAAEAAAD//wYAAQACAAEAAAAAAAYAAQACAAEAAAAAAAcAAQACAAEAAAD//wcAAQACAAEAAAD+/wcAAQACAAEAAAD9/wcAAQACAAEAAAD8/wcAAQACAAEAAAD7/wcAAQACAAEAAAD7/wgAAQACAAEAAAD7/wkAAQACAAEAAAD8/wkAAQACAAEAAAD9/wkAAQACAAEAAAD+/wkAAQACAAEAAAD+/wgAAQACAAEAAAD//wgAAQACAAEAAAAAAAgAAQACAAEAAAAAAAkAAQACAAEAAAD//wkAAQACAAEAAAD9/wgAAQACAAEAAAD8/wgAAQACAAEAAAAAAAoAAQACAAEAAAD//woAAQACAAEAAAD+/woAAQACAAEAAAD9/woAAQACAAEAAAD8/woAAQACAAEAAAD7/woAAQACAAEAAAD6/woAAQACAAEAAAD5/woAAQACAAEAAAD4/woAAQACAAEAAAD3/woAAQACAAEAAAD2/woAAQACAAEAAAABAAUAAQACAAEAAAABAAYAAQACAAEAAAABAAcAAQACAAEAAAABAAgAAQACAAEAAAABAAkAAQACAAEAAAABAAoAAQACAAEAAAACAAUAAQACAAEAAAACAAYAAQACAAEAAAACAAcAAQACAAEAAAACAAgAAQACAAEAAAACAAkAAQACAAEAAAACAAoAAQACAAEAAAADAAUAAQACAAEAAAADAAYAAQACAAEAAAADAAcAAQACAAEAAAADAAgAAQACAAEAAAADAAkAAQACAAEAAAADAAoAAQACAAEAAAAEAAUAAQACAAEAAAAEAAYAAQACAAEAAAAEAAcAAQACAAEAAAAEAAgAAQACAAEAAAAEAAkAAQACAAEAAAAEAAoAAQACAAEAAAAFAAUAAQACAAEAAAAFAAYAAQACAAEAAAAFAAcAAQACAAEAAAAFAAgAAQACAAEAAAAFAAkAAQACAAEAAAAFAAoAAQACAAEAAAAGAAUAAQACAAEAAAAGAAYAAQACAAEAAAAGAAcAAQACAAEAAAAGAAgAAQACAAEAAAAGAAkAAQACAAEAAAAGAAoAAQACAAEAAAAHAAUAAQACAAEAAAAHAAYAAQACAAEAAAAHAAcAAQACAAEAAAAHAAgAAQACAAEAAAAHAAkAAQACAAEAAAAHAAoAAQACAAEAAAAIAAUAAQACAAEAAAAIAAYAAQACAAEAAAAIAAcAAQACAAEAAAAIAAgAAQACAAEAAAAIAAkAAQACAAEAAAAIAAoAAQACAAEAAAAJAAUAAQACAAEAAAAJAAYAAQACAAEAAAAJAAcAAQACAAEAAAAJAAgAAQACAAEAAAAJAAkAAQACAAEAAAAJAAoAAQACAAEAAAAKAAUAAQACAAEAAAAKAAYAAQACAAEAAAAKAAcAAQACAAEAAAAKAAgAAQACAAEAAAAKAAkAAQACAAEAAAAKAAoAAQACAAEAAAALAAUAAQACAAEAAAALAAYAAQACAAEAAAALAAcAAQACAAEAAAALAAgAAQACAAEAAAALAAkAAQACAAEAAAALAAoAAQACAAEAAAAMAAUAAQACAAEAABAMAAYAAQACAAEAABAMAAcAAQACAAEAABAMAAgAAQACAAEAAAAMAAkAAQACAAEAAAAMAAoAAQACAAEAAAANAP7/AQABAAAAAAANAP//AQAGAAMAABANAAUAAQACAAEAABANAAYAAQACAAEAABANAAcAAQACAAEAABANAAgAAQACAAEAAAANAAkAAQACAAEAAAANAAoAAQACAAEAAAAOAP7/AQACAAEAABAOAP//AQAFAAMAABAOAAAAAQAGAAMAABAOAAUAAQACAAEAABAOAAYAAQACAAEAABAOAAcAAQACAAEAABAOAAgAAQACAAEAAAAOAAkAAQACAAEAAAAOAAoAAQACAAEAAAAPAP7/AQACAAEAABAPAP//AQACAAEAABAPAAAAAQABAAIAABAPAAUAAQACAAEAABAPAAYAAQACAAEAABAPAAcAAQACAAEAABAPAAgAAQACAAEAAAAPAAkAAQACAAEAAAAPAAoAAQACAAEAAAAQAP7/AQACAAEAAAAQAP//AQACAAEAAAAQAAAAAQABAAIAAAAQAAUAAQACAAEAAAAQAAYAAQACAAEAAAAQAAcAAQACAAEAAAAQAAgAAQACAAEAAAAQAAkAAQACAAEAAAAQAAoAAQACAAEAAAABAAQAAQADAAAAAAACAAQAAQADAAAAAAADAAQAAQADAAAAAAAEAAQAAQADAAAAAAAFAAQAAQADAAAAAAAGAAQAAQADAAAAAAAHAAQAAQADAAAAAAAIAAQAAQADAAAAAAAJAAQAAQADAAAAAAAKAAQAAQADAAAAAAALAAQAAQADAAAAAAAMAAQAAQADAAAAABANAAQAAQADAAAAABAOAAQAAQADAAAAABAPAAQAAQADAAAAABAQAAQAAQADAAAAAAD2//b/AQACAAEAAAD2//f/AQACAAEAAAD2//j/AQACAAEAAAD2//n/AQACAAEAAAD2//z/AQACAAEAAAD3//b/AQACAAEAAAD3//f/AQACAAEAAAD3//j/AQACAAEAAAD3//n/AQACAAEAAAD3//z/AQACAAEAAAD4//b/AQACAAEAAAD4//f/AQACAAEAAAD4//j/AQACAAEAAAD4//n/AQACAAEAAAD4//z/AQACAAEAAAD5//b/AQACAAEAAAD5//f/AQACAAEAAAD5//j/AQADAAEAAAD5//n/AQADAAIAAAD5//z/AQADAAIAAAD6//b/AQACAAEAAAD6//f/AQACAAEAAAD6//j/AQABAAIAAAD6//z/AQAAAAkAAAD7//b/AQACAAEAAAD7//f/AQACAAEAAAD7//j/AQABAAIAAAD7//z/AQABAAkAAAD8//b/AQACAAEAAAD8//f/AQACAAEAAAD8//j/AQABAAIAAAD8//z/AQABAAkAAAD9//b/AQACAAEAAAD9//f/AQACAAEAAAD9//j/AQABAAIAAAD9//z/AQABAAkAAAD+//b/AQACAAEAAAD+//f/AQACAAEAAAD+//j/AQABAAIAAAD+//z/AQABAAkAAAD///b/AQACAAEAAAD///f/AQACAAEAAAD///j/AQABAAIAAAD///z/AQABAAkAAAAAAPb/AQACAAEAAAAAAPf/AQACAAEAAAAAAPj/AQABAAIAAAAAAPz/AQABAAkAAAABAPb/AQACAAEAAAABAPf/AQACAAEAAAABAPj/AQABAAIAAAABAPz/AQABAAkAAAACAPb/AQACAAEAAAACAPf/AQACAAEAAAACAPj/AQABAAIAAAACAPz/AQABAAkAAAADAPb/AQACAAEAAAADAPf/AQACAAEAAAADAPj/AQABAAIAAAADAPz/AQABAAkAAAAEAPb/AQACAAEAAAAEAPf/AQACAAEAAAAEAPj/AQABAAIAAAAEAPz/AQABAAkAAAAFAPb/AQACAAEAAAAFAPf/AQACAAEAAAAFAPj/AQABAAIAAAAFAPz/AQABAAkAAAAGAPb/AQACAAEAAAAGAPf/AQACAAEAAAAGAPj/AQABAAIAAAAGAPz/AQABAAkAAAAHAPb/AQACAAEAAAAHAPf/AQACAAEAAAAHAPj/AQABAAIAAAAHAPz/AQABAAkAAAAIAPb/AQACAAEAAAAIAPf/AQACAAEAAAAIAPj/AQABAAIAAAAIAPz/AQABAAkAAAAJAPb/AQACAAEAAAAJAPf/AQACAAEAAAAJAPj/AQABAAIAAAAJAPz/AQABAAkAAAAKAPb/AQACAAEAAAAKAPf/AQACAAEAAAAKAPj/AQABAAIAAAAKAPz/AQABAAkAAAALAPb/AQACAAEAAAALAPf/AQACAAEAAAALAPj/AQABAAIAAAALAPz/AQABAAkAAAAMAPb/AQACAAEAAAAMAPf/AQACAAEAAAAMAPj/AQABAAIAAAAMAPz/AQACAAkAAAANAPb/AQACAAEAAAANAPf/AQACAAEAAAANAPj/AQACAAIAAAANAPn/AQABAAAAAAANAPr/AQABAAAAAAANAPv/AQABAAAAAAANAPz/AQABAAAAAAAOAPb/AQACAAEAAAAOAPf/AQACAAEAAAAOAPj/AQACAAEAAAAOAPn/AQACAAEAAAAOAPr/AQACAAEAAAAOAPv/AQACAAEAAAAOAPz/AQACAAEAABAPAPb/AQACAAEAAAAPAPf/AQACAAEAAAAPAPj/AQACAAEAAAAPAPn/AQACAAEAAAAPAPr/AQACAAEAAAAPAPv/AQACAAEAAAAPAPz/AQACAAEAAAAQAPb/AQACAAEAAAAQAPf/AQACAAEAAAAQAPj/AQACAAEAAAAQAPn/AQACAAEAAAAQAPr/AQACAAEAAAAQAPv/AQACAAEAAAAQAPz/AQACAAEAAAD2//X/AQACAAEAAAD2//v/AQACAAEAAAD3//X/AQACAAEAAAD3//v/AQACAAEAAAD4//X/AQACAAEAAAD4//v/AQACAAEAAAD5//X/AQACAAEAAAD5//v/AQADAAIAAAD6//X/AQACAAEAAAD6//v/AQAAAAgAAAD7//X/AQACAAEAAAD7//v/AQABAAgAAAD8//X/AQACAAEAAAD8//v/AQABAAgAAAD9//X/AQACAAEAAAD9//v/AQABAAgAAAD+//X/AQACAAEAAAD+//v/AQABAAgAAAD///X/AQACAAEAAAD///v/AQABAAgAAAAAAPX/AQACAAEAAAAAAPv/AQABAAgAAAABAPX/AQACAAEAAAABAPv/AQABAAgAAAACAPX/AQACAAEAAAACAPv/AQABAAgAAAADAPX/AQACAAEAAAADAPv/AQABAAgAAAAEAPX/AQACAAEAAAAEAPv/AQABAAgAAAAFAPX/AQACAAEAAAAFAPv/AQABAAgAAAAGAPX/AQACAAEAAAAGAPv/AQABAAgAAAAHAPX/AQACAAEAAAAHAPv/AQABAAgAAAAIAPX/AQACAAEAAAAIAPv/AQABAAgAAAAJAPX/AQACAAEAAAAJAPv/AQABAAgAAAAKAPX/AQACAAEAAAAKAPv/AQABAAgAAAALAPX/AQACAAEAAAALAPv/AQABAAgAAAAMAPX/AQACAAEAAAAMAPv/AQACAAgAAAANAPX/AQACAAEAAAAOAPX/AQACAAEAAAAPAPX/AQACAAEAAAAQAPX/AQACAAEAAAD2//3/AQACAAEAAAD3//3/AQACAAEAAAD4//3/AQACAAEAAAAOAP3/AQACAAEAAAAPAP3/AQACAAEAAAAQAP3/AQACAAEAAAD5//3/AQADAAIAAAANAP3/AQABAAAAAAA=")
tile_set = ExtResource("2_v0erk")

[node name="VentCollision" type="TileMapLayer" parent="."]
position = Vector2(0, 128)
tile_map_data = PackedByteArray("AAD4//r/AQADAAAAAAD3//r/AQADAAAAAAD2//r/AQADAAAAAAD2//j/AQABAAIAAAD3//j/AQABAAIAAAD4//j/AQABAAIAAAA=")
tile_set = ExtResource("2_v0erk")

[node name="Backwall" type="TileMapLayer" parent="."]
position = Vector2(0, 128)
tile_map_data = PackedByteArray("AAD5//r/AQADAAMAAAD5//n/AQADAAIAAAD5//j/AQAAAAAAAAD4//r/AQABAAIAAAD4//n/AQACAAEAAAD4//j/AQADAAAAAAD3//r/AQABAAIAAAD3//n/AQACAAEAAAD3//j/AQADAAAAAAD2//r/AQAAAAIAAAD2//n/AQACAAEAAAD2//j/AQABAAMAAAA=")
tile_set = ExtResource("3_lmkqo")

[node name="VentInside" type="TileMapLayer" parent="."]
z_index = 7
position = Vector2(0, 128)
tile_map_data = PackedByteArray("AAD2//n/AQAJAAMAAAD3//n/AQAJAAMAAAD4//n/AQAJAAMAAAD5//n/AQAJAAMAAAA=")
tile_set = ExtResource("3_lmkqo")

[node name="Overventhide" type="Area2D" parent="."]
position = Vector2(0, 128)
collision_mask = 65

[node name="OverVent" type="TileMapLayer" parent="Overventhide"]
z_index = 20
material = SubResource("ShaderMaterial_005up")
tile_map_data = PackedByteArray("AAD2//n/AQAJAAIAAAD3//n/AQAJAAIAAAD4//n/AQAJAAIAAAD5//n/AQAJAAIAAAA=")
tile_set = ExtResource("3_lmkqo")
script = ExtResource("5_nsfy7")

[node name="CollisionShape2D" type="CollisionShape2D" parent="Overventhide"]
position = Vector2(-1056, -832)
shape = SubResource("RectangleShape2D_nwqok")

[node name="FakeWallsHide" type="Area2D" parent="."]
position = Vector2(0, 128)
collision_mask = 65

[node name="FakeWallsVent" type="TileMapLayer" parent="FakeWallsHide"]
z_index = 22
material = SubResource("ShaderMaterial_p52fq")
tile_map_data = PackedByteArray("AAD2//f/AQACAAEAAAD2//j/AQACAAEAAAD3//f/AQACAAEAAAD3//j/AQACAAEAAAD4//f/AQACAAEAAAD4//j/AQACAAEAAAD5//f/AQADAAEAAAD5//j/AQADAAIAAAD2//n/AQACAAEAAAD2//r/AQACAAEAAAD3//n/AQACAAEAAAD3//r/AQACAAEAAAD4//n/AQACAAEAAAD4//r/AQACAAEAAAD5//n/AQADAAIAAAD5//r/AQADAAIAAAD5//v/AQADAAIAAAA=")
tile_set = ExtResource("3_lmkqo")
script = ExtResource("5_nsfy7")

[node name="CollisionShape2D" type="CollisionShape2D" parent="FakeWallsHide"]
position = Vector2(-1056, -832)
shape = SubResource("RectangleShape2D_p48pr")

[node name="ToFactoryFloor" parent="." node_paths=PackedStringArray("closestCameraTrack", "closestCheckpoint") instance=ExtResource("6_2tb61")]
position = Vector2(-1152, 320)
rotation = 3.14159
doorID = 1
nextRoom = "FactoryFloor"
closestCameraTrack = NodePath("../Storage Room")
closestCheckpoint = NodePath("../CheckPoint")

[node name="Storage Room" parent="." instance=ExtResource("7_j7nv0")]
position = Vector2(448, -256)
trackBounds = Vector2(896, 512)

[node name="CheckPoint" parent="." instance=ExtResource("8_gmsui")]
position = Vector2(-768, 384)

[node name="VentToFactory" parent="." node_paths=PackedStringArray("closestCameraTrack") instance=ExtResource("6_2tb61")]
position = Vector2(-1152, -704)
rotation = 3.14159
doorID = 3
nextRoom = "FactoryFloor"
closestCameraTrack = NodePath("../Storage Room")

[node name="ToBossRoom" parent="." node_paths=PackedStringArray("closestCameraTrack", "closestCheckpoint") instance=ExtResource("6_2tb61")]
position = Vector2(2048, 320)
nextRoom = "TestBossScene"
closestCameraTrack = NodePath("../Storage Room")
closestCheckpoint = NodePath("../CheckPoint2")

[node name="CheckPoint2" parent="." instance=ExtResource("8_gmsui")]
position = Vector2(1664, 384)

[node name="TileMapLayer" type="TileMapLayer" parent="."]
tile_map_data = PackedByteArray("AAD2/wAAAQADAAAAAAD2/wEAAQACAAEAAAD2/wIAAQACAAEAAAD2/wMAAQACAAEAAAD2/wQAAQABAAIAAAD3/wAAAQADAAAAAAD3/wEAAQACAAEAAAD3/wIAAQACAAEAAAD3/wMAAQACAAEAAAD3/wQAAQABAAIAAAD4/wQAAQABAAIAAAD4/wMAAQACAAEAAAD4/wIAAQACAAEAAAD4/wEAAQACAAEAAAD4/wAAAQABAAEAAAD4////AQABAAMAAAD5////AQAAAAAAAAD5/wAAAQADAAIAAAD5/wEAAQADAAIAAAD5/wIAAQADAAIAAAD5/wMAAQADAAIAAAD5/wQAAQADAAMAAAANAP//AQABAAMAAAAOAP//AQADAAAAAAAPAP//AQAAAAAAAAAPAAAAAQACAAAAAAAOAAAAAQACAAEAAAAQAAAAAQADAAAAAAAQAAQAAQABAAIAAAAPAAQAAQABAAIAAAAPAAMAAQACAAEAAAAPAAIAAQACAAEAAAAQAAIAAQACAAEAAAAQAAEAAQACAAEAAAAQAAMAAQACAAEAAAAOAAQAAQABAAIAAAAOAAMAAQACAAEAAAAOAAIAAQACAAEAAAAPAAEAAQACAAEAAAAOAAEAAQACAAEAAAANAAQAAQAAAAIAAAANAAMAAQABAAAAAAANAAIAAQABAAAAAAANAAEAAQABAAAAAAANAAAAAQABAAAAAAA=")
tile_set = ExtResource("9_qer7y")

[node name="ScalableBackgroundColor" type="Sprite2D" parent="."]
z_index = -290
position = Vector2(448, -160)
scale = Vector2(10, 6.25)
texture = ExtResource("10_nktyo")

[node name="Walker" parent="." instance=ExtResource("11_5vdsv")]
position = Vector2(-492, -558)

[node name="Walker2" parent="." instance=ExtResource("11_5vdsv")]
position = Vector2(1256, -561)
walkDirection = false

[node name="Walker3" parent="." instance=ExtResource("11_5vdsv")]
position = Vector2(448, 473)
walkDirection = false

[connection signal="body_entered" from="Overventhide" to="Overventhide/OverVent" method="_on_body_entered"]
[connection signal="body_exited" from="Overventhide" to="Overventhide/OverVent" method="_on_body_exited"]
[connection signal="body_entered" from="FakeWallsHide" to="FakeWallsHide/FakeWallsVent" method="_on_body_entered"]
[connection signal="body_exited" from="FakeWallsHide" to="FakeWallsHide/FakeWallsVent" method="_on_body_exited"]
